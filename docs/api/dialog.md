<a name="Dialog"></a>

## Dialog ⇐ <code>EventEmitter</code>
Class representing a SIP Dialog.

Note that instances of this class are not created directly by your code;
rather they are returned from the [Srf#createUAC](Srf#createUAC), [Srf#createUAC](Srf#createUAC), and [Srf#createB2BUA](Srf#createB2BUA)

**Kind**: global class  
**Extends:** <code>EventEmitter</code>  

* [Dialog](#Dialog) ⇐ <code>EventEmitter</code>
    * [new Dialog(srf, type, opts)](#new_Dialog_new)
    * _instance_
        * [.sip](#Dialog+sip) : <code>[SipInfo](#Dialog..SipInfo)</code>
        * [.local](#Dialog+local) : <code>[SipEndpointInfo](#Dialog..SipEndpointInfo)</code>
        * [.remote](#Dialog+remote) : <code>[SipEndpointInfo](#Dialog..SipEndpointInfo)</code>
        * [.destroy([callback])](#Dialog+destroy) ⇒ <code>Promise</code>
        * [.modify(sdp, [callback])](#Dialog+modify) ⇒ <code>Promise</code>
        * [.request(opts, [callback])](#Dialog+request) ⇒ <code>Promise</code>
        * ["destroy" (msg)](#Dialog+event_destroy)
        * ["modify" (req, res)](#Dialog+event_modify)
        * ["refresh" (msg)](#Dialog+event_refresh)
        * ["info" (req, res)](#Dialog+event_info)
        * ["notify" (req, res)](#Dialog+event_notify)
        * ["update" (req, res)](#Dialog+event_update)
        * ["refer" (req, res)](#Dialog+event_refer)
    * _inner_
        * [~Options](#Dialog..Options) : <code>Object</code>
        * [~requestOptions](#Dialog..requestOptions) : <code>Object</code>
        * [~requestCallback](#Dialog..requestCallback) : <code>function</code>
        * [~requestCallback](#Dialog..requestCallback) : <code>function</code>
        * [~modifySessionCallback](#Dialog..modifySessionCallback) : <code>function</code>
        * [~SipInfo](#Dialog..SipInfo) : <code>Object</code>
        * [~SipEndpointInfo](#Dialog..SipEndpointInfo) : <code>Object</code>

<a name="new_Dialog_new"></a>

### new Dialog(srf, type, opts)
Constructor that is called internally by Srf when generating a Dialog instance.


| Param | Type | Description |
| --- | --- | --- |
| srf | <code>Srf</code> | Srf instance that created this dialog |
| type | <code>string</code> | type of SIP dialog: 'uac', or 'uas' |
| opts | <code>[Options](#Dialog..Options)</code> |  |

<a name="Dialog+sip"></a>

### dialog.sip : <code>[SipInfo](#Dialog..SipInfo)</code>
sip properties that uniquely identify this Dialog

**Kind**: instance property of <code>[Dialog](#Dialog)</code>  
<a name="Dialog+local"></a>

### dialog.local : <code>[SipEndpointInfo](#Dialog..SipEndpointInfo)</code>
local side of the Dialog

**Kind**: instance property of <code>[Dialog](#Dialog)</code>  
<a name="Dialog+remote"></a>

### dialog.remote : <code>[SipEndpointInfo](#Dialog..SipEndpointInfo)</code>
local side of the Dialog

**Kind**: instance property of <code>[Dialog](#Dialog)</code>  
<a name="Dialog+destroy"></a>

### dialog.destroy([callback]) ⇒ <code>Promise</code>
destroy the sip dialog by generating a BYE request (in the case of INVITE dialog),
or NOTIFY (in the case of SUBSCRIBE)

**Kind**: instance method of <code>[Dialog](#Dialog)</code>  
**Returns**: <code>Promise</code> - if no callback is supplied, otherwise the function returns a reference to the Dialog  

| Param | Type | Description |
| --- | --- | --- |
| [callback] | <code>[requestCallback](#Dialog..requestCallback)</code> | callback that returns the generated BYE or NOTIFY message |

<a name="Dialog+modify"></a>

### dialog.modify(sdp, [callback]) ⇒ <code>Promise</code>
modify the dialog session by changing attributes of the media connection

**Kind**: instance method of <code>[Dialog](#Dialog)</code>  
**Returns**: <code>Promise</code> - if no callback is supplied, otherwise the function returns a reference to the Dialog  

| Param | Type | Description |
| --- | --- | --- |
| sdp | <code>string</code> | 'hold', 'unhold', or a session description protocol |
| [callback] | <code>[modifySessionCallback](#Dialog..modifySessionCallback)</code> | callback invoked when operation has completed |

<a name="Dialog+request"></a>

### dialog.request(opts, [callback]) ⇒ <code>Promise</code>
send a request within a dialog.
Note that you may also call <code>request.info(..)</code> as a shortcut
to send an INFO message, <code>request.notify(..)</code>
to send a NOTIFY, etc..

**Kind**: instance method of <code>[Dialog](#Dialog)</code>  
**Returns**: <code>Promise</code> - if no callback is supplied a Promise that resolves to the response received,
otherwise the function returns a reference to the Dialog  

| Param | Type | Description |
| --- | --- | --- |
| opts | <code>[requestOptions](#Dialog..requestOptions)</code> | configuration options |
| [callback] | <code>[requestCallback](#Dialog..requestCallback)</code> | callback invoked when operation has completed |

<a name="Dialog+event_destroy"></a>

### "destroy" (msg)
a <code>destroy</code> event is triggered when the Dialog is torn down from the far end

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| msg | <code>Object</code> | incoming BYE request message |

<a name="Dialog+event_modify"></a>

### "modify" (req, res)
a <code>modify</code> event is triggered when the far end modifies the session by sending a re-INVITE.
When an application adds a handler for this event it must generate
the SIP response by calling <code>res.send</code> on the provided drachtio response object.
When no handler is found for this event a 200 OK with the current local SDP
will be automatically generated.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio request object |
| res | <code>Object</code> | drachtio response object |

<a name="Dialog+event_refresh"></a>

### "refresh" (msg)
a <code>refresh</code> event is triggered when the far end sends a session refresh.
There is no need for the application to respond to this event; this is purely
a notification.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| msg | <code>Object</code> | incoming re-INVITE request message |

<a name="Dialog+event_info"></a>

### "info" (req, res)
an <code>info</code> event is triggered when the far end sends an INFO message.
When an application adds a handler for this event it must generate
the SIP response by calling <code>res.send</code> on the provided drachtio response object.
When no handler is found for this event a 200 OK will be automatically generated.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio request object |
| res | <code>Object</code> | drachtio response object |

<a name="Dialog+event_notify"></a>

### "notify" (req, res)
a <code>notify</code> event is triggered when the far end sends a NOTIFY message.
When an application adds a handler for this event it must generate
the SIP response by calling <code>res.send</code> on the provided drachtio response object.
When no handler is found for this event a 200 OK will be automatically generated.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio request object |
| res | <code>Object</code> | drachtio response object |

<a name="Dialog+event_update"></a>

### "update" (req, res)
an <code>update</code> event is triggered when the far end sends an UPDATE message.
When an application adds a handler for this event it must generate
the SIP response by calling <code>res.send</code> on the provided drachtio response object.
When no handler is found for this event a 200 OK will be automatically generated.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio request object |
| res | <code>Object</code> | drachtio response object |

<a name="Dialog+event_refer"></a>

### "refer" (req, res)
a <code>refer</code> event is triggered when the far end sends a REFER message.
When an application adds a handler for this event it must generate
the SIP response by calling <code>res.send</code> on the provided drachtio response object.
When no handler is found for this event a 200 OK will be automatically generated.

**Kind**: event emitted by <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio request object |
| res | <code>Object</code> | drachtio response object |

<a name="Dialog..Options"></a>

### Dialog~Options : <code>Object</code>
Arguments provided to Dialog constructor.

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  
**Properties**

| Name | Type | Description |
| --- | --- | --- |
| req | <code>Object</code> | drachtio Request (only provided when creating a 'uas' dialogs) |
| res | <code>Object</code> | drachtio Response |
| sent | <code>Object</code> | uas only: actual Response sent when confirming the dialog |

<a name="Dialog..requestOptions"></a>

### Dialog~requestOptions : <code>Object</code>
**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  
**Properties**

| Name | Type | Description |
| --- | --- | --- |
| method | <code>String</code> | SIP method to use for the request |
| headers | <code>Object</code> | SIP headers to apply to the request |
| body | <code>String</code> | body of the SIP request |

<a name="Dialog..requestCallback"></a>

### Dialog~requestCallback : <code>function</code>
This callback provides the response to a sip request sent within the dialog.

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| err | <code>Error</code> | error, if any |
| response | <code>Response</code> | response received from the far end |

<a name="Dialog..requestCallback"></a>

### Dialog~requestCallback : <code>function</code>
This callback provides the SIP request that was generated

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| err | <code>Error</code> | error returned on non-success |
| req | <code>Request</code> | Request that was generated |

<a name="Dialog..modifySessionCallback"></a>

### Dialog~modifySessionCallback : <code>function</code>
This callback provides the response a modifySession request.

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  

| Param | Type | Description |
| --- | --- | --- |
| err | <code>Error</code> | non-success sip response code received from far end |

<a name="Dialog..SipInfo"></a>

### Dialog~SipInfo : <code>Object</code>
SIP Dialog identifiers

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  
**Properties**

| Name | Type | Description |
| --- | --- | --- |
| callId | <code>String</code> | SIP Call-ID |
| localTag | <code>String</code> | tag generated by local side of the Dialog |
| remoteTag | <code>String</code> | tag generated by the remote side of the Dialog |

<a name="Dialog..SipEndpointInfo"></a>

### Dialog~SipEndpointInfo : <code>Object</code>
SIP Endpoint identifiers

**Kind**: inner typedef of <code>[Dialog](#Dialog)</code>  
**Properties**

| Name | Type | Description |
| --- | --- | --- |
| uri | <code>String</code> | sip |
| sdp | <code>String</code> | session description protocol |

